<!DOCTYPE html>
<html>

<head>
    <title>Sign_Up</title>
    <meta name="viewport" content="width=device-width, inital-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/Register_style.css">
</head>

<body>
    <header class="top_bar">
        <span class="name">Inventory Management System</span>
    </header>

    <main>
        <h1><a class="h1">Account Registration</a></h1>
        <form id="register-form" method="POST" action="/register">
            <input id="username" type="text" name="username" placeholder="Username" required>
            <input id="email" type="email" name="email" placeholder="Email" required>
            <input id="password" type="password" name="password" placeholder="Password" required>
            <img src="/static/eye.jpg" class ="eye" id="showEye">
            <img src="/static/closeEye.jpg" class ="closeEye" id="hideEye">
            <button type="submit">REGISTER</button>
        </form>

        <!-- Success or Fail Message of Regisring User, updates with JavaScript -->
        <p id="message"></p>
    </main>

    
    <footer class="footer">
        <div class="bottomLeft">
            <h6> CPSC 449 - SPRING 2025 - Project 1</h6>
            <span>MATTHEW AMORA</span> 
            <span>ISLA KIM</span>
            <span>EVAN NG</span>
            <span>KARENE ROSALES</span> 
            <span>ELIZABETH STEUBS</span> 
        </div>
    </footer>


    <!---  ==========      JAVASCIPT CODE      ========= -->
    <script>
        const showEye = document.getElementById('showEye');
        const hideEye = document.getElementById('hideEye');
        const password = document.getElementById('password');
    
        showEye.addEventListener('click', function () 
        {
            password.setAttribute('type', 'text');
            showEye.style.display = 'none';
            hideEye.style.display = 'block';
        }  );
    
        hideEye.addEventListener('click', function () 
        {
            password.setAttribute('type', 'password');
            showEye.style.display = 'block';
            hideEye.style.display = 'none';
        }  );

        document.getElementById("register-form").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevents default form submission

            const formData = new FormData(this);

            fetch("/register", {
                method: "POST",
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                const message = document.getElementById("message");
                if (data.error) {
                    message.style.color = "red";
                    message.textContent = data.error;
                } else {
                    message.style.color = "green";
                    message.textContent = data.message;
                    //setTimeout(() => window.location.href = "/login", 2000); // Redirect after success
                }
            })
            .catch(error => console.error("Error:", error));
        });
    </script>    


</body>



</html>